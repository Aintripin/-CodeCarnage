
### Щас поправим ту хуйню, которую сделали в прошлый раз с модалкой

##### В прошлый раз мы не очень красиво организовали работу со стилями

>`modal.module.scss`:

Вот тут:

![[Pasted image 20241116175733.png]]

мы переопределили переменные

Так делать нельзя. Переменные глобальные, они находятся в одном месте и переопределять их нельзя. Поэтому

![[2c335f0c0994e8db6570540d982f4f5102ed2a0a 1.jpeg|400]]

![[Pasted image 20241116180108.png]]

>`Modal.tsx`:

Вот тут с помощью хука `useTheme` мы получали тему:

![[Pasted image 20241116180155.png]]

И вот так, как CSS-модульный класс, мы навешивали её на корневой блок:

![[Pasted image 20241116180304.png]]

![[Pasted image 20241116180322.png]]

Щас мы это изменим и тему будем добавлять как строку в этот `additional` массив 

Т.е. теперь мы не используем CSS-модули, а просто добавляем строку:

![[Pasted image 20241116180431.png]]

которая будет являться названием темы

Щас Ulbi говорит, что `light` и `dark` — эти названия встречаются слишком часто, поэтому поменяем `enum Theme` на:

![[Pasted image 20241116180838.png]]

#### Терь разберёмся с глобальными стилями

Начнём с 

>`dark.scss`:

![[Pasted image 20241116181700.png]]

Здесь нам теперь не нужно образаться через точку к `dark`, можно просто заюзать тему:

![[Pasted image 20241116181733.png]]

При тёмной теме у нас не меняется цвет шрифта:

![[Pasted image 20241116181931.png]]

В модальном окне он зелёный, а на самой странице — синий

>`index.scss`:

Эти два стиля для шрифта и для цвета:

![[Pasted image 20241116182141.png]]

перенесём в `app` + сделаем ещё один класс, который будет называться `app_modal`

![[Pasted image 20241116182249.png]]

Это проблема возникала из-за того, что мы использовали `teleport`

Теперь вот этот класс `.app_modal` вот сюда:

>`Modal.tsx`:

![[Pasted image 20241116182358.png]]

Добавили в массив `additional`


### Как сделать ещё лучше:

По итогу, по-хорошему, этот глобальный класс с темой нужно вешать на `body` — на самый корневой элемент 

>`useTheme.ts`:

![[Pasted image 20241116182717.png]]

И тогда вот этой возни с порталами, переопределенеиями — её бы, в принципе, не было

Т.е., внутри хука `useTheme`, помимо того, что мы меняем состояние, мы вешаем на корневой элемент `body` эту тему 

> `index.scss`:

![[Pasted image 20241116182906.png]]

Соответственно, тут в глобальных стилях, шрифт и цвет этого шрифта определяем непосредственно в `body`

#### Таким образом, у нас появляется единая точка и мы избавляемся от необходимости навешивать дополнительные классы на компоненты:

>`App.tsx`:

![[Pasted image 20241116183235.png]]

![[Pasted image 20241116183257.png]]

Вот этот хук `useTheme` мы можем по-прежнему использовать

![[Pasted image 20241116183436.png]]

если хотим что-то где-то переопределить 

Но глобально это где-то использовать необходимость пропадает

Мы получаем единую точку входа, и ей является `body`

>`Modal.tsx`:

Т.е. вот эти два класса с модалки тоже можем убрать:

![[Pasted image 20241116183608.png]]
